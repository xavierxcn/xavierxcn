# 提案：增强装修预算助手功能

## Why

当前装修预算助手缺少以下重要功能：

1. **缺少设计费和全屋定制分类**：全案装修通常包含设计费，而全屋定制（衣柜、橱柜、书柜等）是现代装修的重要组成部分，费用占比较高。

2. **无法添加增项**：装修过程中经常会有计划外的增项，用户需要能够在各个分类下自行添加项目。

3. **不同装修方式显示相同的详细程度**：
   - 清包/半包：用户需要关注每个工种的数量、单价，因为这直接影响成本
   - 全包/全案：用户不需要关心"防水多少平、单价多少"这种细节，只需要了解工艺是什么、总价多少

## What Changes

### 1. 新增预算分类

#### 设计费（全案模式显示）
- 设计费（按平米或整体报价）
- 效果图
- 施工图

#### 全屋定制
- 衣柜
- 橱柜
- 书柜/书桌
- 榻榻米
- 鞋柜
- 其他定制

### 2. 增项功能

每个分类下增加"添加自定义项目"按钮，用户可以：
- 输入项目名称
- 输入数量、单价（清包/半包模式）
- 或输入工艺说明、总价（全包/全案模式）
- 删除自定义项目

### 3. 根据装修方式调整显示模式

#### 清包/半包模式（详细模式）
保持当前显示方式：
- 项目名称 | 数量 | 单价 | 品牌/备注 | 小计

#### 全包/全案模式（简化模式）
调整为关注工艺和总价：
- 项目名称 | 工艺说明 | 总价

例如：
- 防水处理 | 东方雨虹/德高，厨卫刷三遍 | ¥3,500
- 水电改造 | 全屋换线，走顶不走地 | ¥12,000

### 4. 汇总调整

在汇总区域新增：
- 设计费（全案模式）
- 全屋定制费用

## 技术实现

### 数据结构变更

```javascript
// 每个分类增加 displayMode 配置
modeConfig: {
  qingbao: { tag: 'labor', display: 'detailed' },
  banbao: { tag: 'included', display: 'detailed' },
  quanbao: { tag: 'included', display: 'simple' },
  quanan: { tag: 'included', display: 'simple' }
}

// 新增分类
design: {
  name: '设计费',
  modeConfig: { quanan: { tag: 'included', display: 'simple' } }
  // 仅全案模式显示
}

custom: {
  name: '全屋定制',
  modeConfig: { ... } // 所有模式都是自购
}
```

### 自定义项目存储

```javascript
// budgetData 增加 customItems
customItems: {
  demolition: [
    { id: 'custom_1', name: '阳台封窗', qty: 1, price: 5000, note: '断桥铝' }
  ]
}
```

## 用户体验

1. **清包/半包用户**：继续使用详细的数量×单价方式，精确控制每一项费用
2. **全包/全案用户**：使用简化的工艺+总价方式，关注装修公司的工艺承诺和整体报价
3. **所有用户**：都可以通过增项功能添加计划外的费用项目
