{% extends "base.html" %}

{% block title %}{{ item.title }} - {{ category.name }} - 占星 - {{ site.title }}{% endblock %}

{% block description %}{{ item.summary | default(value=item.title) }}{% endblock %}

{% block head %}
<style>
.astrology-item-page {
    max-width: 720px;
    margin: 0 auto;
}

.item-breadcrumb {
    font-family: var(--font-sans);
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: var(--space-xl);
}

.item-breadcrumb a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.item-breadcrumb a:hover {
    color: var(--color-accent);
}

.item-breadcrumb span {
    margin: 0 var(--space-sm);
    opacity: 0.5;
}

.item-hero {
    text-align: center;
    padding: var(--space-2xl) 0;
    margin-bottom: var(--space-2xl);
    border-bottom: 1px solid var(--color-border);
}

.item-hero-symbol {
    font-size: 4rem;
    line-height: 1;
    color: var(--color-text-muted);
    margin-bottom: var(--space-lg);
    font-family: "Noto Sans Symbols 2", "Segoe UI Symbol", sans-serif;
    font-variant-emoji: text;
}

.item-hero-title {
    font-family: var(--font-serif);
    font-size: 2.5rem;
    font-weight: 400;
    letter-spacing: 0.08em;
    color: var(--color-text);
    margin-bottom: var(--space-sm);
}

.item-hero-attrs {
    display: flex;
    justify-content: center;
    gap: var(--space-md);
    flex-wrap: wrap;
    margin-bottom: var(--space-lg);
}

.item-hero-attr {
    font-family: var(--font-sans);
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    padding: var(--space-xs) var(--space-sm);
    background: var(--color-code-bg);
}

.item-hero-summary {
    font-family: var(--font-serif);
    font-size: 1.1rem;
    font-style: italic;
    color: var(--color-text-secondary);
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.7;
}

.item-keywords-section {
    display: flex;
    justify-content: center;
    gap: var(--space-sm);
    flex-wrap: wrap;
    margin-top: var(--space-lg);
}

.item-keyword-tag {
    font-family: var(--font-sans);
    font-size: 0.8rem;
    color: var(--color-text-muted);
    padding: var(--space-xs) var(--space-md);
    border: 1px solid var(--color-border);
}

.item-content {
    font-family: var(--font-serif);
    font-size: 1.05rem;
    line-height: 1.85;
    color: var(--color-text);
}

.item-content h1,
.item-content h2,
.item-content h3 {
    font-family: var(--font-serif);
    font-weight: 500;
    color: var(--color-text);
    margin-top: var(--space-2xl);
    margin-bottom: var(--space-md);
}

.item-content h1 { font-size: 1.75rem; }
.item-content h2 { font-size: 1.4rem; }
.item-content h3 { font-size: 1.15rem; }

.item-content p {
    margin-bottom: var(--space-lg);
}

.item-content strong {
    font-weight: 600;
    color: var(--color-text);
}

.item-content ul,
.item-content ol {
    margin-bottom: var(--space-lg);
    padding-left: var(--space-xl);
}

.item-content li {
    margin-bottom: var(--space-sm);
}

.item-nav {
    display: flex;
    justify-content: center;
    margin-top: var(--space-3xl);
    padding-top: var(--space-xl);
    border-top: 1px solid var(--color-border);
}

.item-nav-link {
    font-family: var(--font-sans);
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--color-text-secondary);
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    padding: var(--space-sm) var(--space-lg);
    border: 1px solid var(--color-border);
    transition: all var(--transition-fast);
}

.item-nav-link:hover {
    color: var(--color-text);
    border-color: var(--color-text);
}

@media (max-width: 640px) {
    .item-hero-title {
        font-size: 2rem;
    }

    .item-hero-symbol {
        font-size: 3rem;
    }
}
</style>
{% endblock %}

{% block content %}
<article class="astrology-item-page">
    <nav class="item-breadcrumb">
        <a href="{{ site.base_path }}/astrology/">占星</a>
        <span>/</span>
        <a href="{{ site.base_path }}/astrology/{{ category.id }}/">{{ category.name }}</a>
        <span>/</span>
        {{ item.title }}
    </nav>

    <header class="item-hero">
        {% if item.symbol %}
        <div class="item-hero-symbol">{{ item.symbol }}</div>
        {% endif %}
        <h1 class="item-hero-title">{{ item.title }}</h1>
        {% if item.element or item.modality or item.ruling_planet %}
        <div class="item-hero-attrs">
            {% if item.element %}<span class="item-hero-attr">{{ item.element }}象</span>{% endif %}
            {% if item.modality %}<span class="item-hero-attr">{{ item.modality }}宫</span>{% endif %}
            {% if item.ruling_planet %}<span class="item-hero-attr">守护星: {{ item.ruling_planet }}</span>{% endif %}
        </div>
        {% endif %}
        {% if item.summary %}
        <p class="item-hero-summary">{{ item.summary }}</p>
        {% endif %}
        {% if item.keywords | length > 0 %}
        <div class="item-keywords-section">
            {% for kw in item.keywords %}
            <span class="item-keyword-tag">{{ kw }}</span>
            {% endfor %}
        </div>
        {% endif %}
    </header>

    <div class="item-content">
        {{ item.content | safe }}
    </div>

    <nav class="item-nav">
        <a href="{{ site.base_path }}/astrology/{{ category.id }}/" class="item-nav-link">
            ← 返回{{ category.name }}
        </a>
    </nav>
</article>
{% endblock %}
